# Seshat: Bitcoin Inscription Tool

## Overview
Seshat is a tool designed to enable users to inscribe data onto the Bitcoin blockchain. It utilizes two methods:

1. **Basic Inscription:** Embeds data into the blockchain using the `OP_RETURN` opcode, allowing for up to 80 bytes of data to be written in a single transaction. The data is visible after the transaction is confirmed. Only requires one wallet to broadcast the transaction.

2. **Taproot Scripts:** Utilizes `OP_IF` conditional statements in Taproot scripts to embed larger amounts of data. This requires a transaction to be sent to a recipient, who must spend the UTXOs to reveal the data, necessitating two transactions from two wallets. This method is more complex due to the scripting involved.

## Installation
Before running the Seshat tool, ensure that you have Python installed on your system and the required dependencies are installed using:

```shell
pip install -r requirements.txt
```

## Usage Instructions
To use the Seshat tool, follow these steps:

1. Start `main.py` in your terminal or command prompt.
2. Enter your Bitcoin Core RPC credentials when prompted, including the port, username, and password.
3. The main menu will present you with various options, including wallet creation, loading, funding (in regtest mode), and inscription creation and viewing.
4. Select the desired option by entering the corresponding number and follow the prompts to complete the action.

Note: A wallet must be loaded in order to create inscriptions. When wallets are loaded, a new taproot address is generated.

### Menu Options:

- **Create wallet:** Generates a new wallet with a Taproot address.
- **Load wallet:** Loads existing wallet details.
- **Fund wallet (regtest):** Funds a wallet in regtest mode.
- **Create simple inscription:** Creates a basic inscription with the `OP_RETURN` opcode. 80 byte limit.
- **View simple inscription:** Retrieves and displays the content of a basic inscription.
- **Create taproot inscription:** (Under development)
- **View taproot inscription:** (Under development)

## Helper Modules
### generate_wallet.py
This module provides functionality to create a new wallet in the Bitcoin Core node. It interacts with the node via RPC calls to generate a wallet name and a new Taproot address. It returns the wallet name and address to be used in other operations.

### load_wallets.py
This module lists available wallets and allows the user to load two wallets from the Bitcoin Core node. It performs RPC calls to fetch the list of wallets, prompts the user to select wallets, and returns the selected wallet details, including Taproot addresses.

### regtest_fund_wallet.py
This module contains functions to fund a wallet with Bitcoin in a regtest (regression test) environment. It uses RPC calls to mine blocks and send the block rewards to the specified wallet address. It is useful for testing purposes in a local blockchain setup.

### basic_inscription.py
This module manages the creation of a basic inscription on the Bitcoin blockchain using the `OP_RETURN` opcode. It creates and signs a raw transaction embedding the inscription data, calculates the transaction fee, and broadcasts the transaction to the network.

### basic_inscription_view.py
This module retrieves and decodes a transaction from the Bitcoin blockchain to extract and display the data inscribed with the `OP_RETURN` opcode. It uses RPC calls to get the raw transaction data, decodes it, and prints the inscription content if present.

### File Assurance

The File Assurance feature in Seshat provides a mechanism to store and verify the integrity of files on the Bitcoin blockchain using a Merkle tree structure. This is achieved through two Python modules: `hashfiles.py` and `merkletree.py`.

#### hashfiles.py
This module takes files from the "files" directory and computes their hashes using the Keccak256 algorithm. The hashed files are stored in the `file_assurance/hashes` folder with a timestamped filename. This ensures the integrity of the files at a specific point in time.

#### merkletree.py
This module constructs a Merkle tree from the hashes generated by `hashfiles.py`. It saves both the tree and the root hash in the `file_assurance/hashes` directory with a timestamp. The root hash can be inscribed onto the Bitcoin blockchain, providing a verifiable record of the data's integrity. In case of a need to verify a file, one can reference the saved Merkle tree and compare it with the inscription on the blockchain, or recreate the Merkle tree with the same data for validation.